<!-- app/components/positionsList.html -->
<div>
  <h3>Товары</h3>

  <div class="search-bar">
    <input 
      id="search-input"
      type="text" 
      name="query" 
      placeholder="Найти товар..." 
      value="{{viewState.query}}"
      atom-action="POST /action/filterPositions"
      atom-target="#positionsList-container"
      atom-event="input"
    >
  </div>

  <form>
    <ul>
      <!-- Правильный синтаксис Mustache для итерации по массиву -->
      {{#viewState.filtered}}
      <li>
        <span>{{name}} ({{price}} руб.)</span>
        <button
          atom-action="POST /action/addItem"
          atom-target="#receipt-container"
          name="id"
          value="{{id}}"
        >
          Добавить
        </button>
      </li>
      {{/viewState.filtered}}
    </ul>
  </form>
</div>