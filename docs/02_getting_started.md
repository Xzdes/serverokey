# 2. Быстрый старт: Установка и Первый Запуск

Этот гайд проведет вас через все шаги, необходимые для установки, настройки и запуска демонстрационного приложения "Атомарная Касса" на вашем локальном компьютере. Мы разберем каждую команду, чтобы вы точно понимали, что происходит "под капотом".

## Предварительные Требования

Перед началом убедитесь, что на вашей машине установлены следующие инструменты:

*   **Node.js:** Движок Serverokey работает на платформе Node.js. Мы рекомендуем использовать последнюю LTS-версию (Long-Term Support) или более новую. Проверить версию можно командой `node -v`.
*   **npm (Node Package Manager):** Это стандартный менеджер пакетов для Node.js, который устанавливается вместе с ним. Он необходим для установки зависимостей проекта. Проверить версию можно командой `npm -v`.
*   **Git:** Система контроля версий, необходимая для клонирования репозитория проекта.

## Шаг 1: Клонирование Репозитория

Первый шаг — получить исходный код проекта с GitHub. Откройте ваш терминал (командную строку, PowerShell, или терминал в VS Code) и выполните следующие команды:

```bash
# Клонируем репозиторий с GitHub на ваш компьютер
git clone https://github.com/Xzdes/serverokey.git

# Переходим в только что созданную папку проекта
cd serverokey
```
Теперь вы находитесь в корневой директории монорепозитория.

## Шаг 2: Установка Зависимостей (npm Workspaces)

Проект Serverokey организован как **монорепозиторий**, состоящий из нескольких пакетов (workspaces), которые находятся в папке `packages/`:
*   `serverokey`: Ядро самого движка.
*   `kassa-app-example`: Пример приложения, которое использует ядро.

Благодаря `npm workspaces`, мы можем установить все зависимости для всех пакетов одной командой из корневой директории проекта.

```bash
# Убедитесь, что вы находитесь в корневой папке 'serverokey'
npm install
```
Эта команда проанализирует `package.json` в корне, а также `package.json` внутри каждого пакета, скачает все необходимые библиотеки и установит их.

> **Важно:** В процессе выполнения этой команды будет также скачана версия **Chromium** (около 170-280 МБ), необходимая для работы приложения в нативном десктопном режиме. Это может занять несколько минут в зависимости от скорости вашего интернет-соединения.

## Шаг 3: Навигация и Подготовка Примера

Теперь, когда все зависимости установлены, перейдем в директорию нашего демонстрационного приложения:

```bash
# Переходим в папку с примером кассы
cd packages/kassa-app-example
```
Все последующие команды в этом гайде нужно выполнять из этой директории.

### Наполнение Базы Данных (`seed`)

Пример приложения использует `wise-json-db` — быструю файловую базу данных. При первом запуске эта база данных пуста. Нам нужно создать в ней начальные данные: список товаров и пользователя по умолчанию. Для этого в проекте предусмотрен специальный скрипт — `seed`.

Выполните команду:
```bash
npm run seed
```
Этот скрипт выполнит файл `seed.js`, который:
1.  Создаст в директории `wise-db-data` файлы базы данных.
2.  Заполнит коллекцию `positions` списком товаров (хлеб, молоко и т.д.).
3.  Создаст пользователя с логином `kassir` и паролем `123`.
4.  Очистит коллекции `receipt` и `sessions` для чистого старта.

## Шаг 4: Запуск Приложения

Мы готовы запустить приложение. По умолчанию, пример "Атомарная Касса" настроен на запуск в **нативном десктопном режиме**.

```bash
npm run dev
```
Эта команда запускает `nodemon` — утилиту, которая следит за изменениями в файлах проекта. После успешного запуска произойдет следующее:
1.  В терминале появится сообщение `[Native Mode] Chromium window launched.`.
2.  На вашем экране автоматически откроется окно приложения "Атомарная Касса" без элементов управления браузера.

Если вы хотите запустить приложение в режиме **веб-сервера**, откройте файл `manifest.js` и измените секцию `launch`:
```javascript
// manifest.js
launch: {
  "mode": "server" // было "native"
}
```
Сохраните файл, и `nodemon` автоматически перезапустит приложение. Теперь оно будет доступно в вашем браузере по адресу **`http://localhost:3000`**.

## Шаг 5: Проверка Работоспособности

Независимо от режима запуска, вы должны увидеть страницу входа в систему. Для входа используйте учетные данные, которые мы создали на шаге "Seeding":
*   **Логин:** `kassir`
*   **Пароль:** `123`

После успешного входа вы попадете на главный экран приложения "Атомарная Касса", где сможете добавлять товары в чек, применять скидки и т.д.

**Поздравляем!** Вы полностью развернули, настроили и запустили проект. Теперь вы готовы к глубокому погружению в его архитектуру, которое начнется со следующего раздела.